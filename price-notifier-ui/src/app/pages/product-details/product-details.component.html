<div class="details-container">

  <div class="nav-header">
    <a routerLink="/dashboard" class="back-btn">{{ texts.UI.BACK_BTN }}</a>
  </div>

  @if (loading()) {
    <div class="loader">
      <p>{{ texts.UI.LOADING }}</p>
    </div>
  } @else if (product(); as p) {
    <div class="content">

      <header class="product-header">
        <h1>{{ p.productName }}</h1>
        <a [href]="p.productUrl" target="_blank" class="ceneo-btn">
          {{ texts.UI.CENEO_BTN }}
        </a>
      </header>

      <section class="stats-grid">
        <div class="stat-card current">
          <span class="label">{{ texts.LABELS.CURRENT_PRICE }}</span>
          <span class="value">{{ p.currentPrice | number:'1.2-2' }} zł</span>
        </div>

        <div class="stat-card lowest">
          <span class="label">{{ texts.LABELS.LOWEST_PRICE }}</span>
          <span class="value">{{ lowestPrice() | number:'1.2-2' }} zł</span>
        </div>

        <div class="stat-card last-check">
          <span class="label">{{ texts.LABELS.LAST_CHECK }}</span>
          <span class="value date">
             {{ p.priceHistory.at(-1)?.checkedAt | date:'short' }}
           </span>
        </div>
      </section>

      <section class="chart-section">
        <h3>{{ texts.UI.CHART_TITLE }}</h3>
        <div class="chart-wrapper">
          <canvas baseChart
                  [data]="lineChartData"
                  [options]="lineChartOptions"
                  [type]="'line'">
          </canvas>
        </div>
      </section>

    </div>
  }
</div>
